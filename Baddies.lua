local v0=string.char;local v1=string.byte;local v2=string.sub;local v3=bit32 or bit ;local v4=v3.bxor;local v5=table.concat;local v6=table.insert;local function v7(v9,v10) local v11={};for v14=1, #v9 do v6(v11,v0(v4(v1(v2(v9,v14,v14 + 1 )),v1(v2(v10,1 + (v14% #v10) ,1 + (v14% #v10) + 1 )))%256 ));end return v5(v11);end local v8=v7("\240\225\248\1\195\157\224\54\248\233\240\9\203\149\232\46\224\241\232\17\211\141\240\38\232\249\218\39\229\191\194\24\214\203\210\47\237\183\202\16\222\211\202\55\245\175\210\8\198\219\194\63\182\234\149\77\133\150\141\114\190\226\140\81","\126\177\163\187\69\134\219\167");function dec(v12) local v13=0 + 0 ;while true do if ((0 -0)==v13) then v12=string.gsub(v12,v7("\24\243","\156\67\173\74\165")   .. v8   .. v7("\105\138","\38\84\215\41\118\220\70") ,"");return (v12:gsub(".",function(v15) local v16=0 -0 ;local v17;local v18;while true do if ((0 -0)==v16) then local v22=350 -(87 + 263) ;while true do if (v22==(180 -(67 + 113))) then if (v15=="=") then return "";end v17,v18="",v8:find(v15) -(1 + 0) ;v22=2 -1 ;end if (v22==(1 + 0)) then v16=1;break;end end end if (v16==(3 -2)) then for v23=958 -(802 + 150) ,1, -1 do v17=v17   .. (((((v18%((5 -3)^v23)) -(v18%((3 -1)^(v23-(1 + 0)))))>0) and "1") or "0") ;end return v17;end end end):gsub(v7("\21\18\103\22\187\84\73\103\22\161\21\18\125\87\250\15\83\38\77\187\84\73","\158\48\118\66\114"),function(v19) local v20=0;local v21;while true do if (v20==(997 -(915 + 82))) then if ( #v19~=(22 -14)) then return "";end v21=0 + 0 ;v20=1 -0 ;end if (v20==(1188 -(1069 + 118))) then for v24=2 -1 ,8 do v21=v21 + (((v19:sub(v24,v24)=="1") and ((3 -1)^((2 + 6) -v24))) or 0) ;end return string.char(v21);end end end));end end end

loadstring(dec([[
bG9jYWwgT3Jpb25MaWIgPSBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgoJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zaGxleHdhcmUvT3Jpb24vbWFpbi9zb3VyY2UnKSkpKCkKCmxvY2FsIFdpbmRvdyA9IE9yaW9uTGliOk1ha2VXaW5kb3coewogICAgTmFtZSA9ICJLeW91a2kgUHJlbWl1bSB8IEJhZGRpZXMiLCAKICAgIEhpZGVQcmVtaXVtID0gZmFsc2UsCiAgICBTYXZlQ29uZmlnID0gdHJ1ZSwgCiAgICBDb25maWdGb2xkZXIgPSAiS3lvdWtpQ29uZmlnIiwKICAgIEludHJvRW5hYmxlZCA9IHRydWUsCiAgICBJbnRyb1RleHQgPSAiS3lvdWtpIFByZW1pdW0iLAogICAgSW50cm9JY29uID0gInJieGFzc2V0aWQ6Ly83NzMzOTU1NzQwIgp9KQoKbG9jYWwgQ29tYmF0VGFiID0gV2luZG93Ok1ha2VUYWIoewogICAgTmFtZSA9ICJDb21iYXQiLAogICAgSWNvbiA9ICJyYnhhc3NldGlkOi8vNzczMzY3NDA3OSIsCiAgICBQcmVtaXVtT25seSA9IGZhbHNlCn0pCgpsb2NhbCBIaXRib3hTZWN0aW9uID0gQ29tYmF0VGFiOkFkZFNlY3Rpb24oewogICAgTmFtZSA9ICJIaXRib3ggRXhwYW5kZXIiCn0pCgpIaXRib3hTZWN0aW9uOkFkZFRvZ2dsZSh7CiAgICBOYW1lID0gIkVuYWJsZSBIaXRib3ggRXhwYW5kZXIiLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgU2F2ZSA9IHRydWUsCiAgICBGbGFnID0gImhpdGJveEVuYWJsZWQiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBnZXRnZW52KCkuSGl0Ym94RXhwYW5kZXIgPSBWYWx1ZQogICAgICAgIF9HLkRpc2FibGVkID0gVmFsdWUKICAgICAgICAKICAgICAgICBpZiBub3QgX0cuSGl0Ym94Q29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgIF9HLkhpdGJveENvbm5lY3Rpb24gPSBnYW1lOkdldFNlcnZpY2UoJ1J1blNlcnZpY2UnKS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgX0cuRGlzYWJsZWQgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciBfLCB2IGluIG5leHQsIGdhbWU6R2V0U2VydmljZSgnUGxheWVycycpOkdldFBsYXllcnMoKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiB2Lk5hbWUgfj0gZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuTmFtZSBhbmQgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdCBnZXRnZW52KCkuV2hpdGVsaXN0ZWRQbGF5ZXJzW3YuTmFtZV0gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuQ2hhcmFjdGVyIGFuZCB2LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoX0cuSGVhZFNpemUsIF9HLkhlYWRTaXplLCBfRy5IZWFkU2l6ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSBnZXRnZW52KCkuSGl0Ym94VmlzaWJpbGl0eSBhbmQgMC43IG9yIDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Ccmlja0NvbG9yID0gQnJpY2tDb2xvci5uZXcoIlJlYWxseSBibHVlIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5NYXRlcmlhbCA9ICJOZW9uIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBmb3IgXywgdiBpbiBuZXh0LCBnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKTpHZXRQbGF5ZXJzKCkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdi5OYW1lIH49IGdhbWU6R2V0U2VydmljZSgnUGxheWVycycpLkxvY2FsUGxheWVyLk5hbWUgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYuQ2hhcmFjdGVyIGFuZCB2LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoMiwgMiwgMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQnJpY2tDb2xvciA9IEJyaWNrQ29sb3IubmV3KCJNZWRpdW0gc3RvbmUgZ3JleSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuTWF0ZXJpYWwgPSAiUGxhc3RpYyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kCn0pCgpIaXRib3hTZWN0aW9uOkFkZFNsaWRlcih7CiAgICBOYW1lID0gIkhpdGJveCBTaXplIiwKICAgIE1pbiA9IDIsCiAgICBNYXggPSA1MCwKICAgIERlZmF1bHQgPSAyMCwKICAgIENvbG9yID0gQ29sb3IzLmZyb21SR0IoNzAsIDEyMCwgMjU1KSwKICAgIEluY3JlbWVudCA9IDEsCiAgICBTYXZlID0gdHJ1ZSwKICAgIEZsYWcgPSAiaGl0Ym94U2l6ZSIsCiAgICBWYWx1ZU5hbWUgPSAic3R1ZHMiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBfRy5IZWFkU2l6ZSA9IFZhbHVlCiAgICBlbmQgICAgCn0pCgpsb2NhbCBDb21iYXRGZWF0dXJlc1NlY3Rpb24gPSBDb21iYXRUYWI6QWRkU2VjdGlvbih7CiAgICBOYW1lID0gIkNvbWJhdCBGZWF0dXJlcyIKfSkKCkNvbWJhdEZlYXR1cmVzU2VjdGlvbjpBZGRTbGlkZXIoewogICAgTmFtZSA9ICJBdHRhY2sgU3BlZWQiLAogICAgTWluID0gMC4xLAogICAgTWF4ID0gMiwKICAgIERlZmF1bHQgPSAwLjUsCiAgICBDb2xvciA9IENvbG9yMy5mcm9tUkdCKDcwLCAxMjAsIDI1NSksCiAgICBJbmNyZW1lbnQgPSAwLjEsCiAgICBTYXZlID0gdHJ1ZSwKICAgIEZsYWcgPSAiYXR0YWNrU3BlZWQiLAogICAgVmFsdWVOYW1lID0gIngiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBnZXRnZW52KCkuQXR0YWNrU3BlZWQgPSBWYWx1ZQogICAgZW5kICAgIAp9KQoKQ29tYmF0RmVhdHVyZXNTZWN0aW9uOkFkZFRvZ2dsZSh7CiAgICBOYW1lID0gIktpbGwgQXVyYSAoIENhbid0IHR5cGUgaW4gY2hhdCBvciBjbGljayBhbnl0aGluZyB3aGlsZSBvbiApIiwKICAgIERlZmF1bHQgPSBmYWxzZSwKICAgIFNhdmUgPSB0cnVlLAogICAgRmxhZyA9ICJraWxsQXVyYSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIGdldGdlbnYoKS5LaWxsQXVyYSA9IFZhbHVlCiAgICAgICAgCiAgICAgICAgaWYgbm90IGdldGdlbnYoKS5LaWxsQXVyYUNvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICBnZXRnZW52KCkuS2lsbEF1cmFDb25uZWN0aW9uID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2V0Z2VudigpLktpbGxBdXJhIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCBsb2NhbFBsYXllciA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHBsYXllciBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHBsYXllciB+PSBsb2NhbFBsYXllciBhbmQgcGxheWVyLkNoYXJhY3RlciBhbmQgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IGdldGdlbnYoKS5XaGl0ZWxpc3RlZFBsYXllcnNbcGxheWVyLk5hbWVdIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGRpc3RhbmNlID0gKHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIGxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGlzdGFuY2UgPD0gKF9HLkhlYWRTaXplIG9yIDIwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZpcnR1YWxJbnB1dE1hbmFnZXIgPSBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXJ0dWFsSW5wdXRNYW5hZ2VyOlNlbmRNb3VzZUJ1dHRvbkV2ZW50KDAsIDAsIDAsIHRydWUsIGdhbWUsIDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpcnR1YWxJbnB1dE1hbmFnZXI6U2VuZE1vdXNlQnV0dG9uRXZlbnQoMCwgMCwgMCwgZmFsc2UsIGdhbWUsIDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChnZXRnZW52KCkuQXR0YWNrU3BlZWQgb3IgMC41KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgIGVuZAp9KQoKQ29tYmF0RmVhdHVyZXNTZWN0aW9uOkFkZFRvZ2dsZSh7CiAgICBOYW1lID0gIk1hc3RlcmVkIFVsdHJhIEluc3RpbmN0IiwKICAgIERlZmF1bHQgPSBmYWxzZSwKICAgIFNhdmUgPSB0cnVlLAogICAgRmxhZyA9ICJtdWkiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBnZXRnZW52KCkuTVVJID0gVmFsdWUKICAgICAgICAKICAgICAgICB3aGlsZSBnZXRnZW52KCkuTVVJIGRvCiAgICAgICAgICAgIGZvciBfLCBwbGF5ZXIgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICAgICAgICAgIGlmIHBsYXllciB+PSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIgYW5kIAogICAgICAgICAgICAgICAgICAgbm90IGdldGdlbnYoKS5XaGl0ZWxpc3RlZFBsYXllcnNbcGxheWVyLk5hbWVdIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBwbGF5ZXIuQ2hhcmFjdGVyIGFuZCBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBkaXN0YW5jZSA9IChwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaXNBdHRhY2tpbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBoYXNUb29sID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgd2VhcG9uVHlwZSA9ICJmaXN0cyIKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCB0b29sIGluIHBhaXJzKHBsYXllci5DaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRvb2w6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1Rvb2wgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VhcG9uVHlwZSA9ICJ3ZWFwb24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdG9vbDpGaW5kRmlyc3RDaGlsZCgiSGFuZGxlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBoYW5kbGVWZWxvY2l0eSA9IHRvb2wuSGFuZGxlLlZlbG9jaXR5Lk1hZ25pdHVkZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBoYW5kbGVWZWxvY2l0eSA+IDAuMSB0aGVuIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBdHRhY2tpbmcgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaHVtYW5vaWQgPSBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgdHJhY2sgaW4gcGFpcnMoaHVtYW5vaWQ6R2V0UGxheWluZ0FuaW1hdGlvblRyYWNrcygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRyYWNrLk5hbWU6bG93ZXIoKTptYXRjaCgicHVuY2giKSBvciB0cmFjay5OYW1lOmxvd2VyKCk6bWF0Y2goImF0dGFjayIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBdHRhY2tpbmcgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZiBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJBdHRhY2tpbmciKSBvciAKICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQWN0aW9uIikgb3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTW91c2VCdXR0b24xIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBdHRhY2tpbmcgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgc2FmZURpc3RhbmNlID0gd2VhcG9uVHlwZSA9PSAid2VhcG9uIiBhbmQgMjAgb3IgMTUKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRpc3RhbmNlIDw9IHNhZmVEaXN0YW5jZSBhbmQgKGlzQXR0YWNraW5nIG9yIGhhc1Rvb2wpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGRvZGdlRGlzdGFuY2UgPSB3ZWFwb25UeXBlID09ICJ3ZWFwb24iIGFuZCA4IG9yIDUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGRvZGdlUG9zaXRpb25zID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDAsIGRvZGdlRGlzdGFuY2UpLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldyhkb2RnZURpc3RhbmNlLCAwLCAwKSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoLWRvZGdlRGlzdGFuY2UsIDAsIDApLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAyLCBkb2RnZURpc3RhbmNlKSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGJlc3RQb3MgPSBkb2RnZVBvc2l0aW9uc1sxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgYmVzdERpc3RhbmNlID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgcG9zIGluIHBhaXJzKGRvZGdlUG9zaXRpb25zKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGRpc3QgPSAocG9zLlBvc2l0aW9uIC0gcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBkaXN0ID4gYmVzdERpc3RhbmNlIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdERpc3RhbmNlID0gZGlzdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0UG9zID0gcG9zCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGJlc3RQb3MKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgYmx1ciA9IEluc3RhbmNlLm5ldygiQmx1ckVmZmVjdCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibHVyLlNpemUgPSAxNQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmx1ci5QYXJlbnQgPSBnYW1lLkxpZ2h0aW5nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIkRlYnJpcyIpOkFkZEl0ZW0oYmx1ciwgMC4xKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBjbG9uZSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6Q2xvbmUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHBhcnQgaW4gcGFpcnMoY2xvbmU6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBwYXJ0OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQuTWF0ZXJpYWwgPSBFbnVtLk1hdGVyaWFsLkZvcmNlRmllbGQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydC5Db2xvciA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydC5UcmFuc3BhcmVuY3kgPSAwLjcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmUuUGFyZW50ID0gd29ya3NwYWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIkRlYnJpcyIpOkFkZEl0ZW0oY2xvbmUsIDAuMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjA1KQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgd2FpdCgpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCkNvbWJhdEZlYXR1cmVzU2VjdGlvbjpBZGRUb2dnbGUoewogICAgTmFtZSA9ICJBdXRvIEdyYWIiLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgU2F2ZSA9IHRydWUsCiAgICBGbGFnID0gImF1dG9HcmFiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgZ2V0Z2VudigpLkF1dG9HcmFiRW5hYmxlZCA9IFZhbHVlCiAgICAgICAgCiAgICAgICAgaWYgbm90IGdldGdlbnYoKS5HcmFiQ29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgIGdldGdlbnYoKS5HcmFiQ29ubmVjdGlvbiA9IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLkhlYXJ0YmVhdDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdldGdlbnYoKS5BdXRvR3JhYkVuYWJsZWQgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGxvY2FsUGxheWVyID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBsb2NhbFBsYXllci5qYWxhZGFEZVBlbG9DaGFyZ2UgYW5kIGxvY2FsUGxheWVyLmphbGFkYURlUGVsb0NoYXJnZS5WYWx1ZSA+PSAxMDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgcGxheWVyIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOkdldFBsYXllcnMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHBsYXllciB+PSBsb2NhbFBsYXllciBhbmQgcGxheWVyLkNoYXJhY3RlciBhbmQgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgZ2V0Z2VudigpLldoaXRlbGlzdGVkUGxheWVyc1twbGF5ZXIuTmFtZV0gdGhlbiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBkaXN0YW5jZSA9IChwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBsb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGlzdGFuY2UgPD0gKF9HLkhlYWRTaXplIG9yIDIwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZpcnR1YWxJbnB1dE1hbmFnZXIgPSBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXJ0dWFsSW5wdXRNYW5hZ2VyOlNlbmRLZXlFdmVudCh0cnVlLCBFbnVtLktleUNvZGUuRiwgZmFsc2UsIGdhbWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4xKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXJ0dWFsSW5wdXRNYW5hZ2VyOlNlbmRLZXlFdmVudChmYWxzZSwgRW51bS5LZXlDb2RlLkYsIGZhbHNlLCBnYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCmxvY2FsIFZpc3VhbHNUYWIgPSBXaW5kb3c6TWFrZVRhYih7CiAgICBOYW1lID0gIlZpc3VhbHMiLAogICAgSWNvbiA9ICJyYnhhc3NldGlkOi8vNzczMzcxNTQwMCIsCiAgICBQcmVtaXVtT25seSA9IGZhbHNlCn0pCgpsb2NhbCBFU1BTZWN0aW9uID0gVmlzdWFsc1RhYjpBZGRTZWN0aW9uKHsKICAgIE5hbWUgPSAiRVNQIEZlYXR1cmVzIgp9KQoKRVNQU2VjdGlvbjpBZGRUb2dnbGUoewogICAgTmFtZSA9ICJFbmFibGUgRVNQIiwgCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBTYXZlID0gdHJ1ZSwKICAgIEZsYWcgPSAiZXNwRW5hYmxlZCIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIGdldGdlbnYoKS5FU1BFbmFibGVkID0gVmFsdWUKICAgIGVuZAp9KQoKRVNQU2VjdGlvbjpBZGRUb2dnbGUoewogICAgTmFtZSA9ICJCb3ggRVNQIiwKICAgIERlZmF1bHQgPSBmYWxzZSwKICAgIFNhdmUgPSB0cnVlLAogICAgRmxhZyA9ICJib3hFc3AiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBnZXRnZW52KCkuQm94RVNQID0gVmFsdWUKICAgIGVuZAp9KQoKRVNQU2VjdGlvbjpBZGRUb2dnbGUoewogICAgTmFtZSA9ICJQbGF5ZXIgSGlnaGxpZ2h0IiwKICAgIERlZmF1bHQgPSBmYWxzZSwKICAgIFNhdmUgPSB0cnVlLAogICAgRmxhZyA9ICJwbGF5ZXJIaWdobGlnaHQiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBnZXRnZW52KCkuUGxheWVySGlnaGxpZ2h0ID0gVmFsdWUKICAgIGVuZAp9KQoKRVNQU2VjdGlvbjpBZGRUb2dnbGUoewogICAgTmFtZSA9ICJOYW1lIEVTUCIsCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBTYXZlID0gdHJ1ZSwKICAgIEZsYWcgPSAibmFtZUVzcCIsIAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBnZXRnZW52KCkuTmFtZUVTUCA9IFZhbHVlCiAgICBlbmQKfSkKCkVTUFNlY3Rpb246QWRkVG9nZ2xlKHsKICAgIE5hbWUgPSAiSGVhbHRoIEJhcnMiLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgU2F2ZSA9IHRydWUsCiAgICBGbGFnID0gImhlYWx0aEJhcnMiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBnZXRnZW52KCkuSGVhbHRoQmFyID0gVmFsdWUKICAgIGVuZAp9KQoKRVNQU2VjdGlvbjpBZGRUb2dnbGUoewogICAgTmFtZSA9ICJUcmFjZXJzIiwKICAgIERlZmF1bHQgPSBmYWxzZSwKICAgIFNhdmUgPSB0cnVlLAogICAgRmxhZyA9ICJ0cmFjZXJzIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgZ2V0Z2VudigpLlRyYWNlcnMgPSBWYWx1ZQogICAgZW5kCn0pCgpFU1BTZWN0aW9uOkFkZFRvZ2dsZSh7CiAgICBOYW1lID0gIkRpc3RhbmNlIEVTUCIsCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBTYXZlID0gdHJ1ZSwKICAgIEZsYWcgPSAiZGlzdGFuY2VFc3AiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBnZXRnZW52KCkuRGlzdGFuY2VFU1AgPSBWYWx1ZQogICAgZW5kCn0pCgpFU1BTZWN0aW9uOkFkZFRvZ2dsZSh7CiAgICBOYW1lID0gIlRvb2wgRVNQIiwKICAgIERlZmF1bHQgPSBmYWxzZSwKICAgIFNhdmUgPSB0cnVlLAogICAgRmxhZyA9ICJ0b29sRXNwIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgZ2V0Z2VudigpLlRvb2xFU1AgPSBWYWx1ZQogICAgZW5kCn0pCgpsb2NhbCBFU1BTeXN0ZW0gPSB7fQpsb2NhbCBDYW1lcmEgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYQpsb2NhbCBSdW5TZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikKCmxvY2FsIEVTUENvbnRhaW5lciA9IEluc3RhbmNlLm5ldygiRm9sZGVyIikKRVNQQ29udGFpbmVyLk5hbWUgPSAiRVNQQ29udGFpbmVyIgpFU1BDb250YWluZXIuUGFyZW50ID0gZ2FtZS5Db3JlR3VpCgpmdW5jdGlvbiBFU1BTeXN0ZW0uQ3JlYXRlRVNQKHBsYXllcikKICAgIGxvY2FsIEVTUCA9IHsKICAgICAgICBCb3ggPSBEcmF3aW5nLm5ldygiU3F1YXJlIiksCiAgICAgICAgTmFtZSA9IERyYXdpbmcubmV3KCJUZXh0IiksCiAgICAgICAgRGlzdGFuY2UgPSBEcmF3aW5nLm5ldygiVGV4dCIpLAogICAgICAgIFRvb2wgPSBEcmF3aW5nLm5ldygiVGV4dCIpLAogICAgICAgIEhlYWx0aEJhciA9IERyYXdpbmcubmV3KCJTcXVhcmUiKSwKICAgICAgICBIZWFsdGhCYXJCYWNrZ3JvdW5kID0gRHJhd2luZy5uZXcoIlNxdWFyZSIpLAogICAgICAgIFRyYWNlciA9IERyYXdpbmcubmV3KCJMaW5lIiksCiAgICAgICAgUGxheWVyID0gcGxheWVyLAogICAgICAgIEhpZ2hsaWdodCA9IEluc3RhbmNlLm5ldygiSGlnaGxpZ2h0IikKICAgIH0KICAgIAogICAgRVNQLkJveC5UaGlja25lc3MgPSAxCiAgICBFU1AuQm94LkZpbGxlZCA9IGZhbHNlCiAgICBFU1AuQm94LkNvbG9yID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgIEVTUC5Cb3guVHJhbnNwYXJlbmN5ID0gMQogICAgCiAgICBFU1AuTmFtZS5TaXplID0gMTMKICAgIEVTUC5OYW1lLkNlbnRlciA9IHRydWUKICAgIEVTUC5OYW1lLk91dGxpbmUgPSB0cnVlCiAgICBFU1AuTmFtZS5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAKICAgIEVTUC5EaXN0YW5jZS5TaXplID0gMTMKICAgIEVTUC5EaXN0YW5jZS5DZW50ZXIgPSB0cnVlCiAgICBFU1AuRGlzdGFuY2UuT3V0bGluZSA9IHRydWUKICAgIEVTUC5EaXN0YW5jZS5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAKICAgIEVTUC5Ub29sLlNpemUgPSAxMwogICAgRVNQLlRvb2wuQ2VudGVyID0gdHJ1ZQogICAgRVNQLlRvb2wuT3V0bGluZSA9IHRydWUKICAgIEVTUC5Ub29sLkNvbG9yID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgIAogICAgRVNQLkhlYWx0aEJhckJhY2tncm91bmQuVGhpY2tuZXNzID0gMQogICAgRVNQLkhlYWx0aEJhckJhY2tncm91bmQuRmlsbGVkID0gdHJ1ZQogICAgRVNQLkhlYWx0aEJhckJhY2tncm91bmQuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKQogICAgRVNQLkhlYWx0aEJhci5UaGlja25lc3MgPSAxCiAgICBFU1AuSGVhbHRoQmFyLkZpbGxlZCA9IHRydWUKICAgIEVTUC5IZWFsdGhCYXIuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigwLCAyNTUsIDApCiAgICAKICAgIEVTUC5UcmFjZXIuVGhpY2tuZXNzID0gMQogICAgRVNQLlRyYWNlci5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICAKICAgIEVTUC5IaWdobGlnaHQuRmlsbENvbG9yID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKQogICAgRVNQLkhpZ2hsaWdodC5PdXRsaW5lQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgRVNQLkhpZ2hsaWdodC5GaWxsVHJhbnNwYXJlbmN5ID0gMC41CiAgICBFU1AuSGlnaGxpZ2h0Lk91dGxpbmVUcmFuc3BhcmVuY3kgPSAwCiAgICBFU1AuSGlnaGxpZ2h0LlBhcmVudCA9IEVTUENvbnRhaW5lcgogICAgCiAgICByZXR1cm4gRVNQCmVuZAoKbG9jYWwgRVNQT2JqZWN0cyA9IHt9CgpmdW5jdGlvbiBSZWZyZXNoRVNQKCkKICAgIGZvciBfLCBlc3AgaW4gcGFpcnMoRVNQT2JqZWN0cykgZG8KICAgICAgICBpZiBlc3AuQm94IHRoZW4gZXNwLkJveDpSZW1vdmUoKSBlbmQKICAgICAgICBpZiBlc3AuTmFtZSB0aGVuIGVzcC5OYW1lOlJlbW92ZSgpIGVuZAogICAgICAgIGlmIGVzcC5EaXN0YW5jZSB0aGVuIGVzcC5EaXN0YW5jZTpSZW1vdmUoKSBlbmQKICAgICAgICBpZiBlc3AuVG9vbCB0aGVuIGVzcC5Ub29sOlJlbW92ZSgpIGVuZAogICAgICAgIGlmIGVzcC5IZWFsdGhCYXIgdGhlbiBlc3AuSGVhbHRoQmFyOlJlbW92ZSgpIGVuZAogICAgICAgIGlmIGVzcC5IZWFsdGhCYXJCYWNrZ3JvdW5kIHRoZW4gZXNwLkhlYWx0aEJhckJhY2tncm91bmQ6UmVtb3ZlKCkgZW5kCiAgICAgICAgaWYgZXNwLlRyYWNlciB0aGVuIGVzcC5UcmFjZXI6UmVtb3ZlKCkgZW5kCiAgICAgICAgaWYgZXNwLkhpZ2hsaWdodCB0aGVuIGVzcC5IaWdobGlnaHQ6RGVzdHJveSgpIGVuZAogICAgZW5kCiAgICAKICAgIEVTUE9iamVjdHMgPSB7fQogICAgCiAgICBmb3IgXywgcGxheWVyIGluIHBhaXJzKGdhbWUuUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgaWYgcGxheWVyIH49IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllciB0aGVuCiAgICAgICAgICAgIEVTUE9iamVjdHNbcGxheWVyXSA9IEVTUFN5c3RlbS5DcmVhdGVFU1AocGxheWVyKQogICAgICAgIGVuZAogICAgZW5kCmVuZAoKZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoUmVmcmVzaEVTUCkKClJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGZvciBfLCBlc3AgaW4gcGFpcnMoRVNQT2JqZWN0cykgZG8KICAgICAgICBsb2NhbCBjaGFyYWN0ZXIgPSBlc3AuUGxheWVyLkNoYXJhY3RlcgogICAgICAgIGlmIGNoYXJhY3RlciBhbmQgZ2V0Z2VudigpLkVTUEVuYWJsZWQgYW5kIGVzcC5QbGF5ZXIgfj0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyIHRoZW4KICAgICAgICAgICAgbG9jYWwgaHVtYW5vaWQgPSBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikKICAgICAgICAgICAgbG9jYWwgaHVtYW5vaWRSb290UGFydCA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBodW1hbm9pZCBhbmQgaHVtYW5vaWRSb290UGFydCB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2ZWN0b3IsIG9uU2NyZWVuID0gQ2FtZXJhOldvcmxkVG9WaWV3cG9ydFBvaW50KGh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pCiAgICAgICAgICAgICAgICBsb2NhbCBkaXN0YW5jZSA9IChodW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gQ2FtZXJhLkNGcmFtZS5Qb3NpdGlvbikuTWFnbml0dWRlCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC0tIFVwZGF0ZSBoaWdobGlnaHQKICAgICAgICAgICAgICAgIGlmIGdldGdlbnYoKS5QbGF5ZXJIaWdobGlnaHQgdGhlbgogICAgICAgICAgICAgICAgICAgIGVzcC5IaWdobGlnaHQuRW5hYmxlZCA9IHRydWUKICAgICAgICAgICAgICAgICAgICBlc3AuSGlnaGxpZ2h0LkFkb3JuZWUgPSBjaGFyYWN0ZXIKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBlc3AuSGlnaGxpZ2h0LkVuYWJsZWQgPSBmYWxzZQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIG9uU2NyZWVuIGFuZCBkaXN0YW5jZSA8IDEwMDAgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHNpemUgPSAxIC8gKGRpc3RhbmNlICogMC4wMDIpICogMgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGJveFNpemUgPSBWZWN0b3IyLm5ldyhzaXplLCBzaXplICogMS41KQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIGdldGdlbnYoKS5Cb3hFU1AgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBlc3AuQm94LlZpc2libGUgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIGVzcC5Cb3guU2l6ZSA9IGJveFNpemUKICAgICAgICAgICAgICAgICAgICAgICAgZXNwLkJveC5Qb3NpdGlvbiA9IFZlY3RvcjIubmV3KHZlY3Rvci5YIC0gc2l6ZS8yLCB2ZWN0b3IuWSAtIHNpemUqMC43NSkKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGVzcC5Cb3guVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgZ2V0Z2VudigpLk5hbWVFU1AgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBlc3AuTmFtZS5WaXNpYmxlID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICBlc3AuTmFtZS5Qb3NpdGlvbiA9IFZlY3RvcjIubmV3KHZlY3Rvci5YLCB2ZWN0b3IuWSAtIHNpemUqMC43NSAtIDE1KQogICAgICAgICAgICAgICAgICAgICAgICBlc3AuTmFtZS5UZXh0ID0gZXNwLlBsYXllci5OYW1lCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBlc3AuTmFtZS5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBnZXRnZW52KCkuRGlzdGFuY2VFU1AgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBlc3AuRGlzdGFuY2UuVmlzaWJsZSA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgZXNwLkRpc3RhbmNlLlBvc2l0aW9uID0gVmVjdG9yMi5uZXcodmVjdG9yLlgsIHZlY3Rvci5ZIC0gc2l6ZSowLjc1IC0gMzApCiAgICAgICAgICAgICAgICAgICAgICAgIGVzcC5EaXN0YW5jZS5UZXh0ID0gc3RyaW5nLmZvcm1hdCgiWyVkIHN0dWRzXSIsIG1hdGguZmxvb3IoZGlzdGFuY2UpKQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgZXNwLkRpc3RhbmNlLlZpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIGdldGdlbnYoKS5Ub29sRVNQIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZXNwLlRvb2wuVmlzaWJsZSA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgZXNwLlRvb2wuUG9zaXRpb24gPSBWZWN0b3IyLm5ldyh2ZWN0b3IuWCwgdmVjdG9yLlkgKyBzaXplKjAuNzUpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHRvb2wgPSBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiVG9vbCIpCiAgICAgICAgICAgICAgICAgICAgICAgIGVzcC5Ub29sLlRleHQgPSB0b29sIGFuZCB0b29sLk5hbWUgb3IgIk5vIFRvb2wiCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBlc3AuVG9vbC5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBnZXRnZW52KCkuSGVhbHRoQmFyIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaGVhbHRoID0gaHVtYW5vaWQuSGVhbHRoCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIG1heEhlYWx0aCA9IGh1bWFub2lkLk1heEhlYWx0aAogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBoZWFsdGhQZXJjZW50ID0gaGVhbHRoL21heEhlYWx0aAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgZXNwLkhlYWx0aEJhckJhY2tncm91bmQuVmlzaWJsZSA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgZXNwLkhlYWx0aEJhci5WaXNpYmxlID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgZXNwLkhlYWx0aEJhckJhY2tncm91bmQuU2l6ZSA9IFZlY3RvcjIubmV3KDIsIHNpemUqMS41KQogICAgICAgICAgICAgICAgICAgICAgICBlc3AuSGVhbHRoQmFyQmFja2dyb3VuZC5Qb3NpdGlvbiA9IFZlY3RvcjIubmV3KHZlY3Rvci5YIC0gc2l6ZS8yIC0gNSwgdmVjdG9yLlkgLSBzaXplKjAuNzUpCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBlc3AuSGVhbHRoQmFyLlNpemUgPSBWZWN0b3IyLm5ldygyLCBzaXplKjEuNSAqIGhlYWx0aFBlcmNlbnQpCiAgICAgICAgICAgICAgICAgICAgICAgIGVzcC5IZWFsdGhCYXIuUG9zaXRpb24gPSBWZWN0b3IyLm5ldyh2ZWN0b3IuWCAtIHNpemUvMiAtIDUsIHZlY3Rvci5ZIC0gc2l6ZSowLjc1ICsgKHNpemUqMS41ICogKDEtaGVhbHRoUGVyY2VudCkpKQogICAgICAgICAgICAgICAgICAgICAgICBlc3AuSGVhbHRoQmFyLkNvbG9yID0gQ29sb3IzLmZyb21SR0IoMjU1IC0gKDI1NSAqIGhlYWx0aFBlcmNlbnQpLCAyNTUgKiBoZWFsdGhQZXJjZW50LCAwKQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgZXNwLkhlYWx0aEJhckJhY2tncm91bmQuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGVzcC5IZWFsdGhCYXIuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgZ2V0Z2VudigpLlRyYWNlcnMgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBlc3AuVHJhY2VyLlZpc2libGUgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIGVzcC5UcmFjZXIuRnJvbSA9IFZlY3RvcjIubmV3KENhbWVyYS5WaWV3cG9ydFNpemUuWC8yLCBDYW1lcmEuVmlld3BvcnRTaXplLlkpCiAgICAgICAgICAgICAgICAgICAgICAgIGVzcC5UcmFjZXIuVG8gPSBWZWN0b3IyLm5ldyh2ZWN0b3IuWCwgdmVjdG9yLlkpCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBlc3AuVHJhY2VyLlZpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGVzcC5Cb3guVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgZXNwLk5hbWUuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgZXNwLkRpc3RhbmNlLlZpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIGVzcC5Ub29sLlZpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIGVzcC5IZWFsdGhCYXIuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgZXNwLkhlYWx0aEJhckJhY2tncm91bmQuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgZXNwLlRyYWNlci5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlCiAgICAgICAgICAgIGVzcC5Cb3guVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgIGVzcC5OYW1lLlZpc2libGUgPSBmYWxzZQogICAgICAgICAgICBlc3AuRGlzdGFuY2UuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgIGVzcC5Ub29sLlZpc2libGUgPSBmYWxzZQogICAgICAgICAgICBlc3AuSGVhbHRoQmFyLlZpc2libGUgPSBmYWxzZQogICAgICAgICAgICBlc3AuSGVhbHRoQmFyQmFja2dyb3VuZC5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgZXNwLlRyYWNlci5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgZXNwLkhpZ2hsaWdodC5FbmFibGVkID0gZmFsc2UKICAgICAgICBlbmQKICAgIGVuZAplbmQpCgpmb3IgXywgcGxheWVyIGluIHBhaXJzKGdhbWUuUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICBpZiBwbGF5ZXIgfj0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyIHRoZW4KICAgICAgICBFU1BPYmplY3RzW3BsYXllcl0gPSBFU1BTeXN0ZW0uQ3JlYXRlRVNQKHBsYXllcikKICAgIGVuZAplbmQKCmdhbWUuUGxheWVycy5QbGF5ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKHBsYXllcikKICAgIEVTUE9iamVjdHNbcGxheWVyXSA9IEVTUFN5c3RlbS5DcmVhdGVFU1AocGxheWVyKQplbmQpCgpnYW1lLlBsYXllcnMuUGxheWVyUmVtb3Zpbmc6Q29ubmVjdChmdW5jdGlvbihwbGF5ZXIpCiAgICBpZiBFU1BPYmplY3RzW3BsYXllcl0gdGhlbgogICAgICAgIEVTUE9iamVjdHNbcGxheWVyXS5Cb3g6UmVtb3ZlKCkKICAgICAgICBFU1BPYmplY3RzW3BsYXllcl0uTmFtZTpSZW1vdmUoKQogICAgICAgIEVTUE9iamVjdHNbcGxheWVyXS5EaXN0YW5jZTpSZW1vdmUoKQogICAgICAgIEVTUE9iamVjdHNbcGxheWVyXS5Ub29sOlJlbW92ZSgpCiAgICAgICAgRVNQT2JqZWN0c1twbGF5ZXJdLkhlYWx0aEJhcjpSZW1vdmUoKQogICAgICAgIEVTUE9iamVjdHNbcGxheWVyXS5IZWFsdGhCYXJCYWNrZ3JvdW5kOlJlbW92ZSgpCiAgICAgICAgRVNQT2JqZWN0c1twbGF5ZXJdLlRyYWNlcjpSZW1vdmUoKQogICAgICAgIEVTUE9iamVjdHNbcGxheWVyXS5IaWdobGlnaHQ6RGVzdHJveSgpCiAgICAgICAgRVNQT2JqZWN0c1twbGF5ZXJdID0gbmlsCiAgICBlbmQKZW5kKQoKbG9jYWwgV2hpdGVsaXN0VGFiID0gV2luZG93Ok1ha2VUYWIoewogICAgTmFtZSA9ICJXaGl0ZWxpc3QiLAogICAgSWNvbiA9ICJyYnhhc3NldGlkOi8vNzczMzc3NDYwMiIsCiAgICBQcmVtaXVtT25seSA9IGZhbHNlCn0pCgpsb2NhbCBXaGl0ZWxpc3RTZWN0aW9uID0gV2hpdGVsaXN0VGFiOkFkZFNlY3Rpb24oewogICAgTmFtZSA9ICJXaGl0ZWxpc3QgUGxheWVycyIKfSkKCmdldGdlbnYoKS5XaGl0ZWxpc3RlZFBsYXllcnMgPSBnZXRnZW52KCkuV2hpdGVsaXN0ZWRQbGF5ZXJzIG9yIHt9CgpXaGl0ZWxpc3RTZWN0aW9uOkFkZFRleHRib3goewogICAgTmFtZSA9ICJQbGF5ZXIgTmFtZSIsCiAgICBEZWZhdWx0ID0gIiIsCiAgICBUZXh0RGlzYXBwZWFyID0gdHJ1ZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgbG9jYWwgcGxheWVyID0gZ2FtZS5QbGF5ZXJzOkZpbmRGaXJzdENoaWxkKFZhbHVlKQogICAgICAgIGlmIHBsYXllciB0aGVuCiAgICAgICAgICAgIGdldGdlbnYoKS5XaGl0ZWxpc3RlZFBsYXllcnNbcGxheWVyLk5hbWVdID0gdHJ1ZQogICAgICAgIGVuZAogICAgZW5kCn0pCgpXaGl0ZWxpc3RTZWN0aW9uOkFkZEJ1dHRvbih7CiAgICBOYW1lID0gIlJlbW92ZSBBbGwgV2hpdGVsaXN0ZWQiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2V0Z2VudigpLldoaXRlbGlzdGVkUGxheWVycyA9IHt9CiAgICBlbmQKfSkKCkhpdGJveFNlY3Rpb246QWRkVG9nZ2xlKHsKICAgIE5hbWUgPSAiSGl0Ym94IFZpc2liaWxpdHkiLAogICAgRGVmYXVsdCA9IHRydWUsCiAgICBTYXZlID0gdHJ1ZSwKICAgIEZsYWcgPSAiaGl0Ym94VmlzaWJpbGl0eSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIGdldGdlbnYoKS5IaXRib3hWaXNpYmlsaXR5ID0gVmFsdWUKICAgIGVuZAp9KQoKbG9jYWwgUGxheWVyQ2hlYXRzU2VjdGlvbiA9IENvbWJhdFRhYjpBZGRTZWN0aW9uKHsKICAgIE5hbWUgPSAiUGxheWVyIENoZWF0cyIKfSkKClBsYXllckNoZWF0c1NlY3Rpb246QWRkVG9nZ2xlKHsKICAgIE5hbWUgPSAiQXV0byBTdG9tcCIsCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBTYXZlID0gdHJ1ZSwKICAgIEZsYWcgPSAiYXV0b1N0b21wIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgZ2V0Z2VudigpLkF1dG9TdG9tcCA9IFZhbHVlCiAgICAgICAgCiAgICAgICAgaWYgbm90IGdldGdlbnYoKS5TdG9tcENvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICBnZXRnZW52KCkuU3RvbXBDb25uZWN0aW9uID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2V0Z2VudigpLkF1dG9TdG9tcCB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgbG9jYWxQbGF5ZXIgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllcgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBsb2NhbFBsYXllci5DaGFyYWN0ZXIgb3Igbm90IGxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4gcmV0dXJuIGVuZAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGZvciBfLCBwbGF5ZXIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0UGxheWVycygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiBwbGF5ZXIgfj0gbG9jYWxQbGF5ZXIgYW5kIHBsYXllci5DaGFyYWN0ZXIgYW5kIAogICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgZ2V0Z2VudigpLldoaXRlbGlzdGVkUGxheWVyc1twbGF5ZXIuTmFtZV0gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaHVtYW5vaWQgPSBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXRSb290ID0gcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBsb2NhbFJvb3QgPSBsb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBodW1hbm9pZCBhbmQgdGFyZ2V0Um9vdCBhbmQgbG9jYWxSb290IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBpc1JhZ2RvbGxlZCA9IGh1bWFub2lkOkdldFN0YXRlKCkgPT0gRW51bS5IdW1hbm9pZFN0YXRlVHlwZS5QaHlzaWNzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaXNCZWxvdyA9IHRhcmdldFJvb3QuUG9zaXRpb24uWSA8IGxvY2FsUm9vdC5Qb3NpdGlvbi5ZCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZGlzdGFuY2UgPSAodGFyZ2V0Um9vdC5Qb3NpdGlvbiAtIGxvY2FsUm9vdC5Qb3NpdGlvbikuTWFnbml0dWRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaXNSYWdkb2xsZWQgYW5kIGlzQmVsb3cgYW5kIGRpc3RhbmNlIDw9IChfRy5IZWFkU2l6ZSBvciAyMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2aXJ0dWFsSW5wdXRNYW5hZ2VyID0gZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlydHVhbElucHV0TWFuYWdlcjpTZW5kS2V5RXZlbnQodHJ1ZSwgRW51bS5LZXlDb2RlLkUsIGZhbHNlLCBnYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlydHVhbElucHV0TWFuYWdlcjpTZW5kS2V5RXZlbnQoZmFsc2UsIEVudW0uS2V5Q29kZS5FLCBmYWxzZSwgZ2FtZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgIGVuZAp9KQoKUGxheWVyQ2hlYXRzU2VjdGlvbjpBZGRUb2dnbGUoewogICAgTmFtZSA9ICJBbnRpIFJhZ2RvbGwiLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgU2F2ZSA9IHRydWUsCiAgICBGbGFnID0gImFudGlSYWdkb2xsIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgZ2V0Z2VudigpLkFudGlSYWdkb2xsID0gVmFsdWUKICAgICAgICAKICAgICAgICBpZiBub3QgZ2V0Z2VudigpLlJhZ2RvbGxDb25uZWN0aW9uIHRoZW4KICAgICAgICAgICAgZ2V0Z2VudigpLlJhZ2RvbGxDb25uZWN0aW9uID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2V0Z2VudigpLkFudGlSYWdkb2xsIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCBjaGFyYWN0ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgaWYgY2hhcmFjdGVyIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaHVtYW5vaWQgPSBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikKICAgICAgICAgICAgICAgICAgICAgICAgaWYgaHVtYW5vaWQgYW5kIGh1bWFub2lkOkdldFN0YXRlKCkgPT0gRW51bS5IdW1hbm9pZFN0YXRlVHlwZS5QaHlzaWNzIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh1bWFub2lkOkNoYW5nZVN0YXRlKEVudW0uSHVtYW5vaWRTdGF0ZVR5cGUuUnVubmluZykKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kCn0pCgpQbGF5ZXJDaGVhdHNTZWN0aW9uOkFkZFRvZ2dsZSh7CiAgICBOYW1lID0gIkF1dG8gUmVzZXQgb24gTG93IEhlYWx0aCIsCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBTYXZlID0gdHJ1ZSwKICAgIEZsYWcgPSAiYXV0b1Jlc2V0IiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgZ2V0Z2VudigpLkF1dG9SZXNldCA9IFZhbHVlCiAgICAgICAgCiAgICAgICAgaWYgbm90IGdldGdlbnYoKS5SZXNldENvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICBnZXRnZW52KCkuUmVzZXRDb25uZWN0aW9uID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2V0Z2VudigpLkF1dG9SZXNldCB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY2hhcmFjdGVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgIGlmIGNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGh1bWFub2lkID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGh1bWFub2lkIGFuZCBodW1hbm9pZC5IZWFsdGggPD0gMTUgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyOkJyZWFrSm9pbnRzKCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kCn0pCgpsb2NhbCBQbGF5ZXJUYWIgPSBXaW5kb3c6TWFrZVRhYih7CiAgICBOYW1lID0gIlBsYXllciIsCiAgICBJY29uID0gInJieGFzc2V0aWQ6Ly83NzMzOTU1NzQwIiwKICAgIFByZW1pdW1Pbmx5ID0gZmFsc2UKfSkKCmxvY2FsIFBsYXllck1vZHNTZWN0aW9uID0gUGxheWVyVGFiOkFkZFNlY3Rpb24oewogICAgTmFtZSA9ICJQbGF5ZXIgTW9kaWZpY2F0aW9ucyIKfSkKClBsYXllck1vZHNTZWN0aW9uOkFkZFRvZ2dsZSh7CiAgICBOYW1lID0gIlJhaW5ib3cgQ2hhcmFjdGVyIiwKICAgIERlZmF1bHQgPSBmYWxzZSwKICAgIFNhdmUgPSB0cnVlLAogICAgRmxhZyA9ICJyYWluYm93Q2hhcmFjdGVyIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgZ2V0Z2VudigpLlJhaW5ib3dDaGFyYWN0ZXIgPSBWYWx1ZQogICAgICAgIAogICAgICAgIGlmIG5vdCBnZXRnZW52KCkuUmFpbmJvd0Nvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICBnZXRnZW52KCkuUmFpbmJvd0Nvbm5lY3Rpb24gPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnZXRnZW52KCkuUmFpbmJvd0NoYXJhY3RlciB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgaHVlID0gdGljaygpICUgNSAvIDUKICAgICAgICAgICAgICAgICAgICBsb2NhbCBjb2xvciA9IENvbG9yMy5mcm9tSFNWKGh1ZSwgMSwgMSkKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsb2NhbCBjaGFyYWN0ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgaWYgY2hhcmFjdGVyIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHBhcnQgaW4gcGFpcnMoY2hhcmFjdGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBwYXJ0OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydC5Db2xvciA9IGNvbG9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kCn0pCgpQbGF5ZXJNb2RzU2VjdGlvbjpBZGRUb2dnbGUoewogICAgTmFtZSA9ICJTcGluIEJvdCIsCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBTYXZlID0gdHJ1ZSwKICAgIEZsYWcgPSAic3BpbkJvdCIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIGdldGdlbnYoKS5TcGluQm90ID0gVmFsdWUKICAgICAgICAKICAgICAgICBpZiBub3QgZ2V0Z2VudigpLlNwaW5Db25uZWN0aW9uIHRoZW4KICAgICAgICAgICAgZ2V0Z2VudigpLlNwaW5Db25uZWN0aW9uID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2V0Z2VudigpLlNwaW5Cb3QgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGNoYXJhY3RlciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICBpZiBjaGFyYWN0ZXIgYW5kIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gY2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLkFuZ2xlcygwLCBtYXRoLnJhZCgyMCksIDApCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kCn0pCgpQbGF5ZXJNb2RzU2VjdGlvbjpBZGRTbGlkZXIoewogICAgTmFtZSA9ICJXYWxrIFNwZWVkIiwKICAgIE1pbiA9IDE2LAogICAgTWF4ID0gMjAwLAogICAgRGVmYXVsdCA9IDE2LAogICAgQ29sb3IgPSBDb2xvcjMuZnJvbVJHQig3MCwgMTIwLCAyNTUpLAogICAgSW5jcmVtZW50ID0gMSwKICAgIFNhdmUgPSB0cnVlLAogICAgRmxhZyA9ICJ3YWxrU3BlZWQiLAogICAgVmFsdWVOYW1lID0gIlNwZWVkIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlciBhbmQgCiAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSB0aGVuCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuV2Fsa1NwZWVkID0gVmFsdWUKICAgICAgICBlbmQKICAgIGVuZCAgICAKfSkKClBsYXllck1vZHNTZWN0aW9uOkFkZFNsaWRlcih7CiAgICBOYW1lID0gIkp1bXAgUG93ZXIiLAogICAgTWluID0gNTAsCiAgICBNYXggPSAzMDAsCiAgICBEZWZhdWx0ID0gNTAsCiAgICBDb2xvciA9IENvbG9yMy5mcm9tUkdCKDcwLCAxMjAsIDI1NSksCiAgICBJbmNyZW1lbnQgPSAxLAogICAgU2F2ZSA9IHRydWUsCiAgICBGbGFnID0gImp1bXBQb3dlciIsCiAgICBWYWx1ZU5hbWUgPSAiUG93ZXIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIGFuZCAKICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIHRoZW4KICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5KdW1wUG93ZXIgPSBWYWx1ZQogICAgICAgIGVuZAogICAgZW5kICAgIAp9KQoKUGxheWVyTW9kc1NlY3Rpb246QWRkVG9nZ2xlKHsKICAgIE5hbWUgPSAiQWZ0ZXIgSW1hZ2VzIiwKICAgIERlZmF1bHQgPSBmYWxzZSwKICAgIFNhdmUgPSB0cnVlLAogICAgRmxhZyA9ICJhZnRlckltYWdlcyIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIGdldGdlbnYoKS5BZnRlckltYWdlcyA9IFZhbHVlCiAgICAgICAgCiAgICAgICAgaWYgbm90IGdldGdlbnYoKS5BZnRlckltYWdlQ29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgIGxvY2FsIGxhc3RQb3NpdGlvbiA9IG5pbAogICAgICAgICAgICBsb2NhbCBpbWFnZUNvdW50ID0gMAogICAgICAgICAgICBsb2NhbCBtYXhJbWFnZXMgPSA1CiAgICAgICAgICAgIGxvY2FsIGltYWdlcyA9IHt9CiAgICAgICAgICAgIAogICAgICAgICAgICBnZXRnZW52KCkuQWZ0ZXJJbWFnZUNvbm5lY3Rpb24gPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2V0Z2VudigpLkFmdGVySW1hZ2VzIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCBjaGFyYWN0ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgaWYgY2hhcmFjdGVyIGFuZCBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGN1cnJlbnRQb3NpdGlvbiA9IGNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZiBsYXN0UG9zaXRpb24gYW5kIChjdXJyZW50UG9zaXRpb24gLSBsYXN0UG9zaXRpb24pLk1hZ25pdHVkZSA+IDAuMiB0aGVuICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICNpbWFnZXMgPj0gbWF4SW1hZ2VzIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpbWFnZXNbMV0gYW5kIGltYWdlc1sxXS5QYXJlbnQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZXNbMV06RGVzdHJveSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlKGltYWdlcywgMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBjbG9uZSA9IGNoYXJhY3RlcjpDbG9uZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZS5OYW1lID0gIkFmdGVySW1hZ2UiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCBjaGlsZCBpbiBwYWlycyhjbG9uZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNoaWxkOklzQSgiVG9vbCIpIG9yIGNoaWxkOklzQSgiU2NyaXB0Iikgb3IgY2hpbGQ6SXNBKCJMb2NhbFNjcmlwdCIpIG9yIGNoaWxkOklzQSgiSHVtYW5vaWQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkOkRlc3Ryb3koKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCBwYXJ0IGluIHBhaXJzKGNsb25lOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcGFydDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0Lk1hdGVyaWFsID0gRW51bS5NYXRlcmlhbC5OZW9uICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydC5Db2xvciA9IGdldGdlbnYoKS5BZnRlckltYWdlQ29sb3Igb3IgQ29sb3IzLm5ldygxLCAxLCAxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0LlRyYW5zcGFyZW5jeSA9IDAuNSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQuQW5jaG9yZWQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcGFydDpJc0EoIkRlY2FsIikgb3IgcGFydDpJc0EoIlRleHR1cmUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQuVHJhbnNwYXJlbmN5ID0gMC41CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmU6U2V0UHJpbWFyeVBhcnRDRnJhbWUoY2hhcmFjdGVyOkdldFByaW1hcnlQYXJ0Q0ZyYW1lKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZS5QYXJlbnQgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSA9IDAuNSwgMSwgMC4xIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNsb25lIGFuZCBjbG9uZS5QYXJlbnQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIHBhcnQgaW4gcGFpcnMoY2xvbmU6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBwYXJ0OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQuVHJhbnNwYXJlbmN5ID0gaQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMDMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNsb25lIGFuZCBjbG9uZS5QYXJlbnQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZTpEZXN0cm95KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGltYWdlcywgY2xvbmUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5KDAuMywgZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNsb25lIGFuZCBjbG9uZS5QYXJlbnQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZTpEZXN0cm95KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBsYXN0UG9zaXRpb24gPSBjdXJyZW50UG9zaXRpb24KICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKClBsYXllck1vZHNTZWN0aW9uOkFkZFNsaWRlcih7CiAgICBOYW1lID0gIkFmdGVyIEltYWdlIENvdW50IiwKICAgIE1pbiA9IDEsCiAgICBNYXggPSAxMCwKICAgIERlZmF1bHQgPSA1LAogICAgQ29sb3IgPSBDb2xvcjMuZnJvbVJHQig3MCwgMTIwLCAyNTUpLAogICAgSW5jcmVtZW50ID0gMSwKICAgIFNhdmUgPSB0cnVlLAogICAgRmxhZyA9ICJhZnRlckltYWdlQ291bnQiLAogICAgVmFsdWVOYW1lID0gImltYWdlcyIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIG1heEltYWdlcyA9IFZhbHVlCiAgICBlbmQgICAgCn0pCgpQbGF5ZXJNb2RzU2VjdGlvbjpBZGRDb2xvcnBpY2tlcih7CiAgICBOYW1lID0gIkFmdGVyIEltYWdlIENvbG9yIiwKICAgIERlZmF1bHQgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KSwKICAgIEZsYWcgPSAiYWZ0ZXJJbWFnZUNvbG9yIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgZ2V0Z2VudigpLkFmdGVySW1hZ2VDb2xvciA9IFZhbHVlCiAgICBlbmQKfSkKClBsYXllck1vZHNTZWN0aW9uOkFkZFRvZ2dsZSh7CiAgICBOYW1lID0gIkF1dG8gSGVhbCBXaGVuIExvdyBIZWFsdGgiLAogICAgRGVmYXVsdCA9IGZhbHNlLAogICAgU2F2ZSA9IHRydWUsCiAgICBGbGFnID0gImF1dG9IZWFsUmFnZG9sbCIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIGdldGdlbnYoKS5BdXRvSGVhbFJhZ2RvbGwgPSBWYWx1ZQogICAgICAgIAogICAgICAgIGlmIG5vdCBnZXRnZW52KCkuSGVhbENvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICBnZXRnZW52KCkuSGVhbENvbm5lY3Rpb24gPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnZXRnZW52KCkuQXV0b0hlYWxSYWdkb2xsIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCBsb2NhbFBsYXllciA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGxvY2FsUGxheWVyLkNoYXJhY3RlciB0aGVuIHJldHVybiBlbmQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsb2NhbCBodW1hbm9pZCA9IGxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKQogICAgICAgICAgICAgICAgICAgIGlmIGh1bWFub2lkIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaXNSYWdkb2xsZWQgPSBodW1hbm9pZDpHZXRTdGF0ZSgpID09IEVudW0uSHVtYW5vaWRTdGF0ZVR5cGUuUGh5c2ljcwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBpc0xvd0hlYWx0aCA9IGh1bWFub2lkLkhlYWx0aCA8PSAyIAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzUmFnZG9sbGVkIGFuZCBpc0xvd0hlYWx0aCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOlNldFByaW1hcnlQYXJ0Q0ZyYW1lKENGcmFtZS5uZXcoNTI1LjU3MTE2Njk5MjE4NzUsIDEwLjY3NTkxODU3OTEwMTU2MiwgLTIwNy40MjI1MzExMjc5Mjk3KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgYmx1ciA9IEluc3RhbmNlLm5ldygiQmx1ckVmZmVjdCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibHVyLlNpemUgPSAxNQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmx1ci5QYXJlbnQgPSBnYW1lLkxpZ2h0aW5nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIkRlYnJpcyIpOkFkZEl0ZW0oYmx1ciwgMC4zKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgIGVuZAp9KQoKbG9jYWwgU2VsZkhpdGJveFNlY3Rpb24gPSBQbGF5ZXJUYWI6QWRkU2VjdGlvbih7CiAgICBOYW1lID0gIlNlbGYgSGl0Ym94Igp9KQoKU2VsZkhpdGJveFNlY3Rpb246QWRkVG9nZ2xlKHsKICAgIE5hbWUgPSAiRW5hYmxlIFNlbGYgSGl0Ym94IE1vZGlmaWVyIiwKICAgIERlZmF1bHQgPSBmYWxzZSwKICAgIFNhdmUgPSB0cnVlLAogICAgRmxhZyA9ICJzZWxmSGl0Ym94RW5hYmxlZCIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIGdldGdlbnYoKS5TZWxmSGl0Ym94RW5hYmxlZCA9IFZhbHVlCiAgICAgICAgCiAgICAgICAgaWYgbm90IGdldGdlbnYoKS5TZWxmSGl0Ym94Q29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgIGdldGdlbnYoKS5TZWxmSGl0Ym94Q29ubmVjdGlvbiA9IGdhbWU6R2V0U2VydmljZSgnUnVuU2VydmljZScpLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnZXRnZW52KCkuU2VsZkhpdGJveEVuYWJsZWQgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGNoYXJhY3RlciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICBpZiBjaGFyYWN0ZXIgYW5kIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KGdldGdlbnYoKS5TZWxmSGl0Ym94U2l6ZSBvciAyLCBnZXRnZW52KCkuU2VsZkhpdGJveFNpemUgb3IgMiwgZ2V0Z2VudigpLlNlbGZIaXRib3hTaXplIG9yIDIpCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IGdldGdlbnYoKS5TZWxmSGl0Ym94VmlzaWJsZSBhbmQgMC43IG9yIDEKICAgICAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQnJpY2tDb2xvciA9IEJyaWNrQ29sb3IubmV3KCJSZWFsbHkgYmx1ZSIpCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0Lk1hdGVyaWFsID0gIk5lb24iCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGxvY2FsIGNoYXJhY3RlciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICBpZiBjaGFyYWN0ZXIgYW5kIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDIsIDIsIDEpCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQnJpY2tDb2xvciA9IEJyaWNrQ29sb3IubmV3KCJNZWRpdW0gc3RvbmUgZ3JleSIpCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0Lk1hdGVyaWFsID0gIlBsYXN0aWMiCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kCn0pCgpTZWxmSGl0Ym94U2VjdGlvbjpBZGRTbGlkZXIoewogICAgTmFtZSA9ICJTZWxmIEhpdGJveCBTaXplIiwKICAgIE1pbiA9IDIsCiAgICBNYXggPSA1MCwKICAgIERlZmF1bHQgPSAyLAogICAgQ29sb3IgPSBDb2xvcjMuZnJvbVJHQig3MCwgMTIwLCAyNTUpLAogICAgSW5jcmVtZW50ID0gMSwKICAgIFNhdmUgPSB0cnVlLAogICAgRmxhZyA9ICJzZWxmSGl0Ym94U2l6ZSIsCiAgICBWYWx1ZU5hbWUgPSAic3R1ZHMiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBnZXRnZW52KCkuU2VsZkhpdGJveFNpemUgPSBWYWx1ZQogICAgZW5kICAgIAp9KQoKU2VsZkhpdGJveFNlY3Rpb246QWRkVG9nZ2xlKHsKICAgIE5hbWUgPSAiU2VsZiBIaXRib3ggVmlzaWJpbGl0eSIsCiAgICBEZWZhdWx0ID0gdHJ1ZSwKICAgIFNhdmUgPSB0cnVlLAogICAgRmxhZyA9ICJzZWxmSGl0Ym94VmlzaWJpbGl0eSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIGdldGdlbnYoKS5TZWxmSGl0Ym94VmlzaWJsZSA9IFZhbHVlCiAgICBlbmQKfSkKCmxvY2FsIFRlbGVwb3J0c1RhYiA9IFdpbmRvdzpNYWtlVGFiKHsKICAgIE5hbWUgPSAiVGVsZXBvcnRzIiwKICAgIEljb24gPSAicmJ4YXNzZXRpZDovLzc3MzM5NjA5ODEiLAogICAgUHJlbWl1bU9ubHkgPSBmYWxzZQp9KQoKbG9jYWwgUGxheWVyc1NlY3Rpb24gPSBUZWxlcG9ydHNUYWI6QWRkU2VjdGlvbih7CiAgICBOYW1lID0gIlBsYXllcnMiCn0pCgpsb2NhbCBQbGF5ZXJEcm9wZG93biA9IFBsYXllcnNTZWN0aW9uOkFkZERyb3Bkb3duKHsKICAgIE5hbWUgPSAiU2VsZWN0IFBsYXllciIsCiAgICBEZWZhdWx0ID0gIiIsCiAgICBPcHRpb25zID0ge30sCiAgICBGbGFnID0gInNlbGVjdGVkUGxheWVyIiwKICAgIFNhdmUgPSBmYWxzZQp9KQoKbG9jYWwgZnVuY3Rpb24gUmVmcmVzaFBsYXllckxpc3QoKQogICAgbG9jYWwgcGxheWVycyA9IHt9CiAgICBmb3IgXywgcGxheWVyIGluIHBhaXJzKGdhbWUuUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgaWYgcGxheWVyIH49IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllciB0aGVuCiAgICAgICAgICAgIGxvY2FsIGRpc3BsYXlOYW1lID0gcGxheWVyLkRpc3BsYXlOYW1lCiAgICAgICAgICAgIGxvY2FsIHVzZXJuYW1lID0gcGxheWVyLk5hbWUKICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHBsYXllcnMsIHN0cmluZy5mb3JtYXQoIiglcykgJXMiLCBkaXNwbGF5TmFtZSwgdXNlcm5hbWUpKQogICAgICAgIGVuZAogICAgZW5kCiAgICBQbGF5ZXJEcm9wZG93bjpSZWZyZXNoKHBsYXllcnMpCmVuZAoKUGxheWVyc1NlY3Rpb246QWRkQnV0dG9uKHsKICAgIE5hbWUgPSAiUmVmcmVzaCBQbGF5ZXJzIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIFJlZnJlc2hQbGF5ZXJMaXN0KCkKICAgIGVuZAp9KQoKUGxheWVyc1NlY3Rpb246QWRkQnV0dG9uKHsKICAgIE5hbWUgPSAiVGVsZXBvcnQgdG8gUGxheWVyIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHNlbGVjdGVkT3B0aW9uID0gT3Jpb25MaWIuRmxhZ3NbInNlbGVjdGVkUGxheWVyIl0uVmFsdWUKICAgICAgICBpZiBzZWxlY3RlZE9wdGlvbiB+PSAiIiB0aGVuCiAgICAgICAgICAgIGxvY2FsIHVzZXJuYW1lID0gc2VsZWN0ZWRPcHRpb246bWF0Y2goIiUoJXcrJSkgKCV3KykiKQogICAgICAgICAgICBsb2NhbCB0YXJnZXRQbGF5ZXIgPSBnYW1lLlBsYXllcnM6RmluZEZpcnN0Q2hpbGQodXNlcm5hbWUpCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiB0YXJnZXRQbGF5ZXIgYW5kIHRhcmdldFBsYXllci5DaGFyYWN0ZXIgYW5kIHRhcmdldFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBsb2NhbFBsYXllciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcgogICAgICAgICAgICAgICAgaWYgbG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBsb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgYmx1ciA9IEluc3RhbmNlLm5ldygiQmx1ckVmZmVjdCIpCiAgICAgICAgICAgICAgICAgICAgYmx1ci5TaXplID0gMTUKICAgICAgICAgICAgICAgICAgICBibHVyLlBhcmVudCA9IGdhbWUuTGlnaHRpbmcKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIkRlYnJpcyIpOkFkZEl0ZW0oYmx1ciwgMC4zKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGxvY2FsUGxheWVyLkNoYXJhY3RlcjpTZXRQcmltYXJ5UGFydENGcmFtZSh0YXJnZXRQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCn0pCgpSZWZyZXNoUGxheWVyTGlzdCgpCgpsb2NhbCBMb2NhdGlvbnNTZWN0aW9uID0gVGVsZXBvcnRzVGFiOkFkZFNlY3Rpb24oewogICAgTmFtZSA9ICJMb2NhdGlvbnMiCn0pCgpMb2NhdGlvbnNTZWN0aW9uOkFkZEJ1dHRvbih7CiAgICBOYW1lID0gIlRlbGVwb3J0IHRvIEtGQyIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBsb2NhbFBsYXllciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcgogICAgICAgIGlmIGxvY2FsUGxheWVyLkNoYXJhY3RlciBhbmQgbG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICBsb2NhbCBibHVyID0gSW5zdGFuY2UubmV3KCJCbHVyRWZmZWN0IikKICAgICAgICAgICAgYmx1ci5TaXplID0gMTUKICAgICAgICAgICAgYmx1ci5QYXJlbnQgPSBnYW1lLkxpZ2h0aW5nCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiRGVicmlzIik6QWRkSXRlbShibHVyLCAwLjMpCiAgICAgICAgICAgIAogICAgICAgICAgICBsb2NhbFBsYXllci5DaGFyYWN0ZXI6U2V0UHJpbWFyeVBhcnRDRnJhbWUoQ0ZyYW1lLm5ldyg0Ny40NjQyNjM5MTYwMTU2MjUsIDExLjAwMDI0MjIzMzI3NjM2NywgLTkzLjM1ODgyNTY4MzU5Mzc1KSkKICAgICAgICBlbmQKICAgIGVuZAp9KQoKTG9jYXRpb25zU2VjdGlvbjpBZGRCdXR0b24oewogICAgTmFtZSA9ICJUZWxlcG9ydCB0byBGbGFtZXRocm93ZXIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgbG9jYWxQbGF5ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIKICAgICAgICBpZiBsb2NhbFBsYXllci5DaGFyYWN0ZXIgYW5kIGxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgbG9jYWwgYmx1ciA9IEluc3RhbmNlLm5ldygiQmx1ckVmZmVjdCIpCiAgICAgICAgICAgIGJsdXIuU2l6ZSA9IDE1CiAgICAgICAgICAgIGJsdXIuUGFyZW50ID0gZ2FtZS5MaWdodGluZwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIkRlYnJpcyIpOkFkZEl0ZW0oYmx1ciwgMC4zKQogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOlNldFByaW1hcnlQYXJ0Q0ZyYW1lKENGcmFtZS5uZXcoNzkuMDMwNjMyMDE5MDQyOTcsIDEyLjE4MzkxNTEzODI0NDYyOSwgMTQ2LjE1MzQ3MjkwMDM5MDYyKSkKICAgICAgICBlbmQKICAgIGVuZAp9KQoKTG9jYXRpb25zU2VjdGlvbjpBZGRCdXR0b24oewogICAgTmFtZSA9ICJUZWxlcG9ydCB0byBCYWRkaWVzIEJvdXRpcXVlIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIGxvY2FsUGxheWVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyCiAgICAgICAgaWYgbG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBsb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgIGxvY2FsIGJsdXIgPSBJbnN0YW5jZS5uZXcoIkJsdXJFZmZlY3QiKQogICAgICAgICAgICBibHVyLlNpemUgPSAxNQogICAgICAgICAgICBibHVyLlBhcmVudCA9IGdhbWUuTGlnaHRpbmcKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJEZWJyaXMiKTpBZGRJdGVtKGJsdXIsIDAuMykKICAgICAgICAgICAgCiAgICAgICAgICAgIGxvY2FsUGxheWVyLkNoYXJhY3RlcjpTZXRQcmltYXJ5UGFydENGcmFtZShDRnJhbWUubmV3KDM5Ny40MTM2NjU3NzE0ODQ0LCA5LjM3Njc4NjIzMTk5NDYyOSwgLTEwNC44NTQ4NzM2NTcyMjY1NikpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCkxvY2F0aW9uc1NlY3Rpb246QWRkQnV0dG9uKHsKICAgIE5hbWUgPSAiVGVsZXBvcnQgdG8gRnJ5aW5nIFBhbiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBsb2NhbFBsYXllciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcgogICAgICAgIGlmIGxvY2FsUGxheWVyLkNoYXJhY3RlciBhbmQgbG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICBsb2NhbCBibHVyID0gSW5zdGFuY2UubmV3KCJCbHVyRWZmZWN0IikKICAgICAgICAgICAgYmx1ci5TaXplID0gMTUKICAgICAgICAgICAgYmx1ci5QYXJlbnQgPSBnYW1lLkxpZ2h0aW5nCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiRGVicmlzIik6QWRkSXRlbShibHVyLCAwLjMpCiAgICAgICAgICAgIAogICAgICAgICAgICBsb2NhbFBsYXllci5DaGFyYWN0ZXI6U2V0UHJpbWFyeVBhcnRDRnJhbWUoQ0ZyYW1lLm5ldyg0MTAuMTA0OTQ5OTUxMTcxOSwgOS4zNzY3ODYyMzE5OTQ2MjksIC0xNzYuMTcxMzg2NzE4NzUpKQogICAgICAgIGVuZAogICAgZW5kCn0pCgpMb2NhdGlvbnNTZWN0aW9uOkFkZEJ1dHRvbih7CiAgICBOYW1lID0gIlRlbGVwb3J0IHRvIFNhbG9uIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIGxvY2FsUGxheWVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyCiAgICAgICAgaWYgbG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBsb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgIGxvY2FsIGJsdXIgPSBJbnN0YW5jZS5uZXcoIkJsdXJFZmZlY3QiKQogICAgICAgICAgICBibHVyLlNpemUgPSAxNQogICAgICAgICAgICBibHVyLlBhcmVudCA9IGdhbWUuTGlnaHRpbmcKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJEZWJyaXMiKTpBZGRJdGVtKGJsdXIsIDAuMykKICAgICAgICAgICAgCiAgICAgICAgICAgIGxvY2FsUGxheWVyLkNoYXJhY3RlcjpTZXRQcmltYXJ5UGFydENGcmFtZShDRnJhbWUubmV3KDQ4My42MDE4MDY2NDA2MjUsIDEwLjc1MjUwNzIwOTc3NzgzMiwgLTI3OC4xOTMzODk4OTI1NzgxKSkKICAgICAgICBlbmQKICAgIGVuZAp9KQoKTG9jYXRpb25zU2VjdGlvbjpBZGRCdXR0b24oewogICAgTmFtZSA9ICJUZWxlcG9ydCB0byBIb3NwaXRhbCIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBsb2NhbFBsYXllciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcgogICAgICAgIGlmIGxvY2FsUGxheWVyLkNoYXJhY3RlciBhbmQgbG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICBsb2NhbCBibHVyID0gSW5zdGFuY2UubmV3KCJCbHVyRWZmZWN0IikKICAgICAgICAgICAgYmx1ci5TaXplID0gMTUKICAgICAgICAgICAgYmx1ci5QYXJlbnQgPSBnYW1lLkxpZ2h0aW5nCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiRGVicmlzIik6QWRkSXRlbShibHVyLCAwLjMpCiAgICAgICAgICAgIAogICAgICAgICAgICBsb2NhbFBsYXllci5DaGFyYWN0ZXI6U2V0UHJpbWFyeVBhcnRDRnJhbWUoQ0ZyYW1lLm5ldyg1MDcuMjcxNjk3OTk4MDQ2OSwgMTAuNjc1OTE3NjI1NDI3MjQ2LCAtMTg1LjkyNjUxMzY3MTg3NSkpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCkxvY2F0aW9uc1NlY3Rpb246QWRkQnV0dG9uKHsKICAgIE5hbWUgPSAiVGVsZXBvcnQgdG8gUm9ja2V0IExhdW5jaGVyIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIGxvY2FsUGxheWVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyCiAgICAgICAgaWYgbG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBsb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgIGxvY2FsIGJsdXIgPSBJbnN0YW5jZS5uZXcoIkJsdXJFZmZlY3QiKQogICAgICAgICAgICBibHVyLlNpemUgPSAxNQogICAgICAgICAgICBibHVyLlBhcmVudCA9IGdhbWUuTGlnaHRpbmcKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJEZWJyaXMiKTpBZGRJdGVtKGJsdXIsIDAuMykKICAgICAgICAgICAgCiAgICAgICAgICAgIGxvY2FsUGxheWVyLkNoYXJhY3RlcjpTZXRQcmltYXJ5UGFydENGcmFtZShDRnJhbWUubmV3KDU3My4xMzcwODQ5NjA5Mzc1LCA5LjI2OTQwNjMxODY2NDU1LCAtMTAyLjk3NTM5NTIwMjYzNjcyKSkKICAgICAgICBlbmQKICAgIGVuZAp9KQoKTG9jYXRpb25zU2VjdGlvbjpBZGRCdXR0b24oewogICAgTmFtZSA9ICJUZWxlcG9ydCB0byBEZWFsZXJzaGlwIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIGxvY2FsUGxheWVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyCiAgICAgICAgaWYgbG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBsb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgIGxvY2FsIGJsdXIgPSBJbnN0YW5jZS5uZXcoIkJsdXJFZmZlY3QiKQogICAgICAgICAgICBibHVyLlNpemUgPSAxNQogICAgICAgICAgICBibHVyLlBhcmVudCA9IGdhbWUuTGlnaHRpbmcKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJEZWJyaXMiKTpBZGRJdGVtKGJsdXIsIDAuMykKICAgICAgICAgICAgCiAgICAgICAgICAgIGxvY2FsUGxheWVyLkNoYXJhY3RlcjpTZXRQcmltYXJ5UGFydENGcmFtZShDRnJhbWUubmV3KDU1OC4wODE0ODE5MzM1OTM4LCA5Ljc5NTI4MzMxNzU2NTkxOCwgMTcuNjkzNzYzNzMyOTEwMTU2KSkKICAgICAgICBlbmQKICAgIGVuZAp9KQoKTG9jYXRpb25zU2VjdGlvbjpBZGRCdXR0b24oewogICAgTmFtZSA9ICJUZWxlcG9ydCB0byBBZG9wdGlvbiBDZW50ZXIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgbG9jYWxQbGF5ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIKICAgICAgICBpZiBsb2NhbFBsYXllci5DaGFyYWN0ZXIgYW5kIGxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgbG9jYWwgYmx1ciA9IEluc3RhbmNlLm5ldygiQmx1ckVmZmVjdCIpCiAgICAgICAgICAgIGJsdXIuU2l6ZSA9IDE1CiAgICAgICAgICAgIGJsdXIuUGFyZW50ID0gZ2FtZS5MaWdodGluZwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIkRlYnJpcyIpOkFkZEl0ZW0oYmx1ciwgMC4zKQogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOlNldFByaW1hcnlQYXJ0Q0ZyYW1lKENGcmFtZS5uZXcoMTg4Ljg0NzYxMDQ3MzYzMjgsIDkuNTEzNTAxMTY3Mjk3MzYzLCAzOTkuNDc5NzM2MzI4MTI1KSkKICAgICAgICBlbmQKICAgIGVuZAp9KQoKTG9jYXRpb25zU2VjdGlvbjpBZGRCdXR0b24oewogICAgTmFtZSA9ICJUZWxlcG9ydCB0byBKYWlsIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIGxvY2FsUGxheWVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyCiAgICAgICAgaWYgbG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBsb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgIGxvY2FsIGJsdXIgPSBJbnN0YW5jZS5uZXcoIkJsdXJFZmZlY3QiKQogICAgICAgICAgICBibHVyLlNpemUgPSAxNQogICAgICAgICAgICBibHVyLlBhcmVudCA9IGdhbWUuTGlnaHRpbmcKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJEZWJyaXMiKTpBZGRJdGVtKGJsdXIsIDAuMykKICAgICAgICAgICAgCiAgICAgICAgICAgIGxvY2FsUGxheWVyLkNoYXJhY3RlcjpTZXRQcmltYXJ5UGFydENGcmFtZShDRnJhbWUubmV3KC00MS4wODkwNjE3MzcwNjA1NSwgMTAuMjMxODAwMDc5MzQ1NzAzLCAzODcuMDY1NjQzMzEwNTQ2OSkpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCkxvY2F0aW9uc1NlY3Rpb246QWRkQnV0dG9uKHsKICAgIE5hbWUgPSAiVGVsZXBvcnQgdG8gQmVhY2giLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgbG9jYWxQbGF5ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIKICAgICAgICBpZiBsb2NhbFBsYXllci5DaGFyYWN0ZXIgYW5kIGxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgbG9jYWwgYmx1ciA9IEluc3RhbmNlLm5ldygiQmx1ckVmZmVjdCIpCiAgICAgICAgICAgIGJsdXIuU2l6ZSA9IDE1CiAgICAgICAgICAgIGJsdXIuUGFyZW50ID0gZ2FtZS5MaWdodGluZwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIkRlYnJpcyIpOkFkZEl0ZW0oYmx1ciwgMC4zKQogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOlNldFByaW1hcnlQYXJ0Q0ZyYW1lKENGcmFtZS5uZXcoLTE2Ni42ODgwOTUsIDkuMzYzODA3NjgsIC0xNS4xMzk0MzY3LCAwLjA4NzE1NTUyODQsIDMuNzk2Mzg5NDNlLTA5LCAwLjk5NjE5NDcyLCA0LjI0NTk5MjM2ZS0wOCwgMSwgLTcuNTI1NjQzMjJlLTA5LCAtMC45OTYxOTQ3MiwgNC4yOTU0MjUxN2UtMDgsIDAuMDg3MTU1NTI4NCkpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCkxvY2F0aW9uc1NlY3Rpb246QWRkQnV0dG9uKHsKICAgIE5hbWUgPSAiVGVsZXBvcnQgdG8gR2FzIFN0YXRpb24iLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgbG9jYWxQbGF5ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIKICAgICAgICBpZiBsb2NhbFBsYXllci5DaGFyYWN0ZXIgYW5kIGxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgbG9jYWwgYmx1ciA9IEluc3RhbmNlLm5ldygiQmx1ckVmZmVjdCIpCiAgICAgICAgICAgIGJsdXIuU2l6ZSA9IDE1CiAgICAgICAgICAgIGJsdXIuUGFyZW50ID0gZ2FtZS5MaWdodGluZwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIkRlYnJpcyIpOkFkZEl0ZW0oYmx1ciwgMC4zKQogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOlNldFByaW1hcnlQYXJ0Q0ZyYW1lKENGcmFtZS5uZXcoMTcyLjI5MTcwMiwgOS42MTUyNjk2NiwgLTI5Ljk4MzY4MDcsIDAuMDA4NzI2NjY3NjEsIC02LjI5OTQ5ODUyZS0wOCwgLTAuOTk5OTYxOTEzLCAtMS4xMzAwNjcxOGUtMTMsIDEsIC02LjI5OTczODY5ZS0wOCwgMC45OTk5NjE5MTMsIDUuNDk4NzAyNmUtMTAsIDAuMDA4NzI2NjY3NjEpKQogICAgICAgIGVuZAogICAgZW5kCn0pCgpMb2NhdGlvbnNTZWN0aW9uOkFkZEJ1dHRvbih7CiAgICBOYW1lID0gIlRlbGVwb3J0IHRvIFJpbmciLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgbG9jYWxQbGF5ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIKICAgICAgICBpZiBsb2NhbFBsYXllci5DaGFyYWN0ZXIgYW5kIGxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgbG9jYWwgYmx1ciA9IEluc3RhbmNlLm5ldygiQmx1ckVmZmVjdCIpCiAgICAgICAgICAgIGJsdXIuU2l6ZSA9IDE1CiAgICAgICAgICAgIGJsdXIuUGFyZW50ID0gZ2FtZS5MaWdodGluZwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIkRlYnJpcyIpOkFkZEl0ZW0oYmx1ciwgMC4zKQogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOlNldFByaW1hcnlQYXJ0Q0ZyYW1lKENGcmFtZS5uZXcoMzIuNzc3NjAzMSwgOS44NTQ4NDMxNCwgLTQzNy41NTUxMTUsIC0wLjAyNjE3NzQxOTMsIDMuMjI3NTA3ODZlLTA4LCAwLjk5OTY1NzMzMywgOC4wNjAxNjEwNWUtMTIsIDEsIC0zLjIyODU5MzIxZS0wOCwgLTAuOTk5NjU3MzMzLCAtOC4zNzEwNDk0MWUtMTAsIC0wLjAyNjE3NzQxOTMpKQogICAgICAgIGVuZAogICAgZW5kCn0pCgpsb2NhbCBTZXR0aW5nc1RhYiA9IFdpbmRvdzpNYWtlVGFiKHsKICAgIE5hbWUgPSAiU2V0dGluZ3MiLAogICAgSWNvbiA9ICJyYnhhc3NldGlkOi8vNzczNDA1MzQ5NSIsCiAgICBQcmVtaXVtT25seSA9IGZhbHNlCn0pCgoKbG9jYWwgQ3JlZGl0c1RhYiA9IFdpbmRvdzpNYWtlVGFiKHsKICAgIE5hbWUgPSAiSW5mbyIsIAogICAgSWNvbiA9ICJyYnhhc3NldGlkOi8vNDQ4MzM0NTk5OCIsCiAgICBQcmVtaXVtT25seSA9IGZhbHNlCn0pCgpsb2NhbCBDcmVkaXRzU2VjdGlvbiA9IENyZWRpdHNUYWI6QWRkU2VjdGlvbih7CiAgICBOYW1lID0gIlNjcmlwdCBJbmZvcm1hdGlvbiIKfSkKCkNyZWRpdHNTZWN0aW9uOkFkZEJ1dHRvbih7CiAgICBOYW1lID0gIk1hZGUgYnkgQWtpbyIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBzZXRjbGlwYm9hcmQoImJjMXE0eG42NGhmNmpuN3ZzZ3lrZ3BxY2xscnY1dzg2IikKICAgIGVuZAp9KQoKQ3JlZGl0c1NlY3Rpb246QWRkQnV0dG9uKHsKICAgIE5hbWUgPSAiRm9yIHN1cHBvcnQgam9pbiBkaXNjb3JkLmdnL2ZsZWVkIiwgCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBzZXRjbGlwYm9hcmQoImRpc2NvcmQuZ2cvZmxlZWQiKQogICAgZW5kCn0pCgoKCmxvY2FsIENvbmZpZ1NlY3Rpb24gPSBTZXR0aW5nc1RhYjpBZGRTZWN0aW9uKHsKICAgIE5hbWUgPSAiQ29uZmlndXJhdGlvbiIKfSkKCkNvbmZpZ1NlY3Rpb246QWRkQnV0dG9uKHsKICAgIE5hbWUgPSAiUmVzZXQgQWxsIFNldHRpbmdzIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIC0tIFJlc2V0IGFsbCBzYXZlZCBmbGFncyB0byB0aGVpciBkZWZhdWx0IHZhbHVlcwogICAgICAgIE9yaW9uTGliOlJlc2V0QWxsKCkKICAgICAgICAKICAgICAgICAtLSBSZXNldCBhbGwgZ2xvYmFsIHZhcmlhYmxlcwogICAgICAgIGdldGdlbnYoKS5IaXRib3hFeHBhbmRlciA9IGZhbHNlCiAgICAgICAgZ2V0Z2VudigpLldoaXRlbGlzdGVkUGxheWVycyA9IHt9CiAgICAgICAgZ2V0Z2VudigpLkhpdGJveFZpc2liaWxpdHkgPSB0cnVlCiAgICAgICAgZ2V0Z2VudigpLktpbGxBdXJhID0gZmFsc2UKICAgICAgICBnZXRnZW52KCkuTVVJID0gZmFsc2UKICAgICAgICBnZXRnZW52KCkuQXV0b0dyYWJFbmFibGVkID0gZmFsc2UKICAgICAgICBnZXRnZW52KCkuRVNQRW5hYmxlZCA9IGZhbHNlCiAgICAgICAgZ2V0Z2VudigpLkJveEVTUCA9IGZhbHNlCiAgICAgICAgZ2V0Z2VudigpLlBsYXllckhpZ2hsaWdodCA9IGZhbHNlCiAgICAgICAgZ2V0Z2VudigpLk5hbWVFU1AgPSBmYWxzZQogICAgICAgIGdldGdlbnYoKS5IZWFsdGhCYXIgPSBmYWxzZQogICAgICAgIGdldGdlbnYoKS5UcmFjZXJzID0gZmFsc2UKICAgICAgICBnZXRnZW52KCkuRGlzdGFuY2VFU1AgPSBmYWxzZQogICAgICAgIGdldGdlbnYoKS5Ub29sRVNQID0gZmFsc2UKICAgICAgICBnZXRnZW52KCkuQXV0b1N0b21wID0gZmFsc2UKICAgICAgICBnZXRnZW52KCkuQW50aVJhZ2RvbGwgPSBmYWxzZQogICAgICAgIGdldGdlbnYoKS5BdXRvUmVzZXQgPSBmYWxzZQogICAgICAgIGdldGdlbnYoKS5SYWluYm93Q2hhcmFjdGVyID0gZmFsc2UKICAgICAgICBnZXRnZW52KCkuU3BpbkJvdCA9IGZhbHNlCiAgICAgICAgZ2V0Z2VudigpLkFmdGVySW1hZ2VzID0gZmFsc2UKICAgICAgICBnZXRnZW52KCkuQXV0b0hlYWxSYWdkb2xsID0gZmFsc2UKICAgICAgICAKICAgICAgICAtLSBSZXNldCBjaGFyYWN0ZXIgcHJvcGVydGllcwogICAgICAgIGxvY2FsIGNoYXJhY3RlciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICBpZiBjaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICBpZiBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgdGhlbgogICAgICAgICAgICAgICAgY2hhcmFjdGVyLkh1bWFub2lkLldhbGtTcGVlZCA9IDE2CiAgICAgICAgICAgICAgICBjaGFyYWN0ZXIuSHVtYW5vaWQuSnVtcFBvd2VyID0gNTAKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICAtLSBSZXNldCBjaGFyYWN0ZXIgY29sb3JzCiAgICAgICAgICAgIGZvciBfLCBwYXJ0IGluIHBhaXJzKGNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgaWYgcGFydDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgIHBhcnQuQ29sb3IgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgLS0gUmVzZXQgaGl0Ym94ZXMKICAgICAgICBmb3IgXywgdiBpbiBuZXh0LCBnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKTpHZXRQbGF5ZXJzKCkgZG8KICAgICAgICAgICAgaWYgdi5OYW1lIH49IGdhbWU6R2V0U2VydmljZSgnUGxheWVycycpLkxvY2FsUGxheWVyLk5hbWUgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIHYuQ2hhcmFjdGVyIGFuZCB2LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdi5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoMiwgMiwgMSkKICAgICAgICAgICAgICAgICAgICAgICAgdi5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICAgICAgICAgIHYuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQnJpY2tDb2xvciA9IEJyaWNrQ29sb3IubmV3KCJNZWRpdW0gc3RvbmUgZ3JleSIpCiAgICAgICAgICAgICAgICAgICAgICAgIHYuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuTWF0ZXJpYWwgPSAiUGxhc3RpYyIKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgLS0gTm90aWZ5IHVzZXIKICAgICAgICBPcmlvbkxpYjpNYWtlTm90aWZpY2F0aW9uKHsKICAgICAgICAgICAgTmFtZSA9ICJTZXR0aW5ncyBSZXNldCIsCiAgICAgICAgICAgIENvbnRlbnQgPSAiQWxsIHNldHRpbmdzIGhhdmUgYmVlbiByZXNldCB0byBkZWZhdWx0IHZhbHVlcyIsCiAgICAgICAgICAgIEltYWdlID0gInJieGFzc2V0aWQ6Ly80NDgzMzQ1OTk4IiwKICAgICAgICAgICAgVGltZSA9IDUKICAgICAgICB9KQogICAgZW5kCn0pCgpDb25maWdTZWN0aW9uOkFkZEJ1dHRvbih7CiAgICBOYW1lID0gIlNhdmUgQ3VycmVudCBTZXR0aW5ncyIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBPcmlvbkxpYjpTYXZlU2V0dGluZ3MoKQogICAgICAgIAogICAgICAgIE9yaW9uTGliOk1ha2VOb3RpZmljYXRpb24oewogICAgICAgICAgICBOYW1lID0gIlNldHRpbmdzIFNhdmVkIiwKICAgICAgICAgICAgQ29udGVudCA9ICJZb3VyIGN1cnJlbnQgc2V0dGluZ3MgaGF2ZSBiZWVuIHNhdmVkIiwKICAgICAgICAgICAgSW1hZ2UgPSAicmJ4YXNzZXRpZDovLzQ0ODMzNDU5OTgiLAogICAgICAgICAgICBUaW1lID0gNQogICAgICAgIH0pCiAgICBlbmQKfSkKCmxvY2FsIFVJU2VjdGlvbiA9IFNldHRpbmdzVGFiOkFkZFNlY3Rpb24oewogICAgTmFtZSA9ICJVSSBTZXR0aW5ncyIKfSkKClVJU2VjdGlvbjpBZGRUb2dnbGUoewogICAgTmFtZSA9ICJVSSBTb3VuZHMiLAogICAgRGVmYXVsdCA9IHRydWUsCiAgICBTYXZlID0gdHJ1ZSwKICAgIEZsYWcgPSAidWlTb3VuZHMiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBPcmlvbkxpYi5TZXR0aW5ncy5VSS5Tb3VuZHMgPSBWYWx1ZQogICAgZW5kCn0pCgpVSVNlY3Rpb246QWRkS2V5YmluZCh7CiAgICBOYW1lID0gIlRvZ2dsZSBVSSIsCiAgICBEZWZhdWx0ID0gRW51bS5LZXlDb2RlLlJpZ2h0Q29udHJvbCwKICAgIEhvbGQgPSBmYWxzZSwKICAgIFNhdmUgPSB0cnVlLAogICAgRmxhZyA9ICJ0b2dnbGVVSSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBHVUkgPSBnYW1lOkdldFNlcnZpY2UoIkNvcmVHdWkiKTpGaW5kRmlyc3RDaGlsZCgiT3Jpb24iKQogICAgICAgIGlmIEdVSSB0aGVuCiAgICAgICAgICAgIEdVSS5FbmFibGVkID0gbm90IEdVSS5FbmFibGVkCiAgICAgICAgZW5kCiAgICBlbmQgICAgCn0pCgpVSVNlY3Rpb246QWRkQnV0dG9uKHsKICAgIE5hbWUgPSAiRGVzdHJveSBVSSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBPcmlvbkxpYjpEZXN0cm95KCkKICAgIGVuZCAgICAKfSkKCgpPcmlvbkxpYjpJbml0KCkKCmdhbWU6R2V0U2VydmljZSgiQ29yZUd1aSIpLkNoaWxkUmVtb3ZlZDpDb25uZWN0KGZ1bmN0aW9uKGNoaWxkKQogICAgaWYgY2hpbGQuTmFtZSA9PSAiT3Jpb24iIHRoZW4KICAgICAgICBpZiBnZXRnZW52KCkuR3JhYkNvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICBnZXRnZW52KCkuR3JhYkNvbm5lY3Rpb246RGlzY29ubmVjdCgpCiAgICAgICAgZW5kCiAgICAgICAgaWYgX0cuSGl0Ym94Q29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgIF9HLkhpdGJveENvbm5lY3Rpb246RGlzY29ubmVjdCgpCiAgICAgICAgZW5kCiAgICAgICAgZ2V0Z2VudigpLkVTUEVuYWJsZWQgPSBmYWxzZQogICAgICAgIGdldGdlbnYoKS5Cb3hFU1AgPSBmYWxzZQogICAgICAgIGdldGdlbnYoKS5IaXRib3hFeHBhbmRlciA9IGZhbHNlCiAgICAgICAgZ2V0Z2VudigpLkF1dG9HcmFiRW5hYmxlZCA9IGZhbHNlCiAgICAgICAgZ2V0Z2VudigpLk1VSSA9IGZhbHNlCiAgICAgICAgX0cuRGlzYWJsZWQgPSBmYWxzZQogICAgICAgIAogICAgICAgIGZvciBfLCB2IGluIG5leHQsIGdhbWU6R2V0U2VydmljZSgnUGxheWVycycpOkdldFBsYXllcnMoKSBkbwogICAgICAgICAgICBpZiB2Lk5hbWUgfj0gZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJykuTG9jYWxQbGF5ZXIuTmFtZSB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgdi5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoMiwgMiwgMSkKICAgICAgICAgICAgICAgICAgICB2LkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgICAgICB2LkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkJyaWNrQ29sb3IgPSBCcmlja0NvbG9yLm5ldygiTWVkaXVtIHN0b25lIGdyZXkiKQogICAgICAgICAgICAgICAgICAgIHYuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuTWF0ZXJpYWwgPSAiUGxhc3RpYyIKICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgaWYgZ2V0Z2VudigpLktpbGxBdXJhQ29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgIGdldGdlbnYoKS5LaWxsQXVyYUNvbm5lY3Rpb246RGlzY29ubmVjdCgpCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgaWYgZ2V0Z2VudigpLlN0b21wQ29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgIGdldGdlbnYoKS5TdG9tcENvbm5lY3Rpb246RGlzY29ubmVjdCgpCiAgICAgICAgZW5kCiAgICAgICAgaWYgZ2V0Z2VudigpLlJhZ2RvbGxDb25uZWN0aW9uIHRoZW4KICAgICAgICAgICAgZ2V0Z2VudigpLlJhZ2RvbGxDb25uZWN0aW9uOkRpc2Nvbm5lY3QoKQogICAgICAgIGVuZAogICAgICAgIGlmIGdldGdlbnYoKS5SZXNldENvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICBnZXRnZW52KCkuUmVzZXRDb25uZWN0aW9uOkRpc2Nvbm5lY3QoKQogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIGdldGdlbnYoKS5XaGl0ZWxpc3RlZFBsYXllcnMgPSB7fQogICAgICAgIGdldGdlbnYoKS5BdXRvU3RvbXAgPSBmYWxzZQogICAgICAgIGdldGdlbnYoKS5BbnRpUmFnZG9sbCA9IGZhbHNlCiAgICAgICAgZ2V0Z2VudigpLkF1dG9SZXNldCA9IGZhbHNlCiAgICAgICAgCiAgICAgICAgZ2V0Z2VudigpLkhpdGJveFZpc2liaWxpdHkgPSB0cnVlCiAgICAgICAgaWYgX0cuSGl0Ym94Q29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgIF9HLkhpdGJveENvbm5lY3Rpb246RGlzY29ubmVjdCgpCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgZm9yIF8sIHYgaW4gbmV4dCwgZ2FtZTpHZXRTZXJ2aWNlKCdQbGF5ZXJzJyk6R2V0UGxheWVycygpIGRvCiAgICAgICAgICAgIGlmIHYuTmFtZSB+PSBnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKS5Mb2NhbFBsYXllci5OYW1lIHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiB2LkNoYXJhY3RlciBhbmQgdi5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHYuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDIsIDIsIDEpCiAgICAgICAgICAgICAgICAgICAgICAgIHYuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICAgICAgICAgICAgICB2LkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkJyaWNrQ29sb3IgPSBCcmlja0NvbG9yLm5ldygiTWVkaXVtIHN0b25lIGdyZXkiKQogICAgICAgICAgICAgICAgICAgICAgICB2LkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0Lk1hdGVyaWFsID0gIlBsYXN0aWMiCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIGlmIGdldGdlbnYoKS5SYWluYm93Q29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgIGdldGdlbnYoKS5SYWluYm93Q29ubmVjdGlvbjpEaXNjb25uZWN0KCkKICAgICAgICBlbmQKICAgICAgICBpZiBnZXRnZW52KCkuU3BpbkNvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICBnZXRnZW52KCkuU3BpbkNvbm5lY3Rpb246RGlzY29ubmVjdCgpCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgbG9jYWwgY2hhcmFjdGVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgIGlmIGNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgIGZvciBfLCBwYXJ0IGluIHBhaXJzKGNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgaWYgcGFydDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgIHBhcnQuQ29sb3IgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgdGhlbgogICAgICAgICAgICAgICAgY2hhcmFjdGVyLkh1bWFub2lkLldhbGtTcGVlZCA9IDE2CiAgICAgICAgICAgICAgICBjaGFyYWN0ZXIuSHVtYW5vaWQuSnVtcFBvd2VyID0gNTAKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgZ2V0Z2VudigpLlJhaW5ib3dDaGFyYWN0ZXIgPSBmYWxzZQogICAgICAgIGdldGdlbnYoKS5TcGluQm90ID0gZmFsc2UKICAgICAgICAKICAgICAgICBpZiBnZXRnZW52KCkuQWZ0ZXJJbWFnZUNvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICBnZXRnZW52KCkuQWZ0ZXJJbWFnZUNvbm5lY3Rpb246RGlzY29ubmVjdCgpCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgZm9yIF8sIGltYWdlIGluIHBhaXJzKHdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiBpbWFnZS5OYW1lID09ICJBZnRlckltYWdlIiB0aGVuCiAgICAgICAgICAgICAgICBpbWFnZTpEZXN0cm95KCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgZm9yIF8sIGltYWdlIGluIHBhaXJzKHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGlmIGltYWdlLk5hbWUgPT0gIkFmdGVySW1hZ2UiIHRoZW4KICAgICAgICAgICAgICAgIGltYWdlOkRlc3Ryb3koKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICBnZXRnZW52KCkuQWZ0ZXJJbWFnZXMgPSBmYWxzZQogICAgICAgIAogICAgICAgIGlmIGdldGdlbnYoKS5TZWxmSGl0Ym94Q29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgIGdldGdlbnYoKS5TZWxmSGl0Ym94Q29ubmVjdGlvbjpEaXNjb25uZWN0KCkKICAgICAgICAgICAgCiAgICAgICAgICAgIGxvY2FsIGNoYXJhY3RlciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgaWYgY2hhcmFjdGVyIGFuZCBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICBjaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoMiwgMiwgMSkKICAgICAgICAgICAgICAgIGNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgIGNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkJyaWNrQ29sb3IgPSBCcmlja0NvbG9yLm5ldygiTWVkaXVtIHN0b25lIGdyZXkiKQogICAgICAgICAgICAgICAgY2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuTWF0ZXJpYWwgPSAiUGxhc3RpYyIKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKQo=
]]))()
